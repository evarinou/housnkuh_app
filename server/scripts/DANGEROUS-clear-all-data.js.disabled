const mongoose = require('mongoose');

async function clearAllData() {
  try {
    await mongoose.connect('mongodb://192.168.178.99:27017/housnkuh');
    console.log('âœ… Verbindung zur Datenbank hergestellt');
    
    const User = require('../dist/models/User.js').default;
    const Mietfach = require('../dist/models/Mietfach.js').default;
    const Vertrag = require('../dist/models/Vertrag.js').default;
    const MonthlyRevenue = require('../dist/models/MonthlyRevenue.js').default;
    
    console.log('ğŸ—‘ï¸ LÃ¶sche alle Daten...');
    
    // LÃ¶sche alle Collections
    const userResult = await User.deleteMany({});
    const mietfachResult = await Mietfach.deleteMany({});
    const vertragResult = await Vertrag.deleteMany({});
    const revenueResult = await MonthlyRevenue.deleteMany({});
    
    console.log(`âœ… ${userResult.deletedCount} Benutzer gelÃ¶scht`);
    console.log(`âœ… ${mietfachResult.deletedCount} MietfÃ¤cher gelÃ¶scht`);
    console.log(`âœ… ${vertragResult.deletedCount} VertrÃ¤ge gelÃ¶scht`);
    console.log(`âœ… ${revenueResult.deletedCount} UmsatzdatensÃ¤tze gelÃ¶scht`);
    
    console.log('\nğŸ‰ Alle Daten erfolgreich gelÃ¶scht!');
    console.log('ğŸ“ Sie kÃ¶nnen jetzt Ihre eigenen Testdaten hinzufÃ¼gen.');
    
  } catch (error) {
    console.error('âŒ Fehler beim LÃ¶schen der Daten:', error);
  } finally {
    mongoose.disconnect();
  }
}

clearAllData();